<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive UUID Version Guide</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }

        h1 {
            text-align: center;
            color: #4a5568;
            margin-bottom: 30px;
            font-size: 2.5em;
        }

        .version-selector {
            text-align: center;
            margin-bottom: 30px;
        }

        .version-btn {
            background: #4299e1;
            color: white;
            border: none;
            padding: 12px 24px;
            margin: 5px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .version-btn:hover {
            background: #3182ce;
            transform: translateY(-2px);
        }

        .version-btn.active {
            background: #2d3748;
            transform: scale(1.05);
        }

        .uuid-display {
            background: #f7fafc;
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            border: 3px solid #e2e8f0;
        }

        .uuid-container {
            margin: 20px 0;
        }

        .diagram-container {
            background: #ffffff;
            padding: 30px;
            border-radius: 8px;
            margin: 20px 0;
            border: 2px solid #e2e8f0;
        }

        .uuid-main {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 30px;
            color: #2d3748;
        }

        .breakdown-table {
            margin-top: 30px;
            border: 2px solid #4a5568;
            border-radius: 8px;
            overflow: hidden;
        }

        .table-header {
            display: flex;
            background: #4a5568;
            color: white;
            font-weight: bold;
        }

        .table-row {
            display: flex;
            background: white;
            border-top: 1px solid #e2e8f0;
        }

        .table-cell {
            padding: 12px 8px;
            text-align: center;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            border-right: 1px solid #e2e8f0;
        }

        .table-cell:last-child {
            border-right: none;
        }

        .table-cell.cell1 { flex: 2; }
        .table-cell.cell2 { flex: 1.2; }
        .table-cell.cell3 { flex: 1.2; }
        .table-cell.cell4 { flex: 1.2; }
        .table-cell.cell5 { flex: 2.5; }

        .description {
            background: #ebf8ff;
            border-left: 4px solid #4299e1;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }

        .description h3 {
            color: #2b6cb0;
            margin-top: 0;
        }

        .timeline {
            background: #f0fff4;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }

        .timeline h4 {
            color: #22543d;
            margin-top: 0;
        }

        .timeline-item {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            background: white;
            padding: 10px;
            margin: 8px 0;
            border-radius: 6px;
            border-left: 4px solid #38a169;
        }

        .pros-cons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .pros, .cons {
            padding: 20px;
            border-radius: 12px;
        }

        .pros {
            background: #f0fff4;
            border-left: 4px solid #38a169;
        }

        .cons {
            background: #fffaf0;
            border-left: 4px solid #dd6b20;
        }

        .pros h4 {
            color: #22543d;
            margin-top: 0;
        }

        .cons h4 {
            color: #744210;
            margin-top: 0;
        }

        .info-box {
            background: #e6fffa;
            border-left: 4px solid #38a169;
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
        }

        /* D3.js specific styles */
        .uuid-segment {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .uuid-segment:hover {
            stroke: #2d3748;
            stroke-width: 3;
        }

        .connection-line {
            stroke: #4a5568;
            stroke-width: 2;
            fill: none;
        }

        .description-text {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 12px;
            font-weight: bold;
            fill: #2d3748;
        }

        .arrow {
            fill: #4a5568;
        }

        @media (max-width: 768px) {
            .pros-cons {
                grid-template-columns: 1fr;
            }

            .uuid-main {
                font-size: 18px;
                word-break: break-all;
            }
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
</head>
<body>
    <div class="container">
        <h1>🔢 The Amazing UUID Family Tree! 🔢</h1>
        
        <div class="version-selector">
            <button class="version-btn active" onclick="showVersion(1)">Version 1</button>
            <button class="version-btn" onclick="showVersion(3)">Version 3</button>
            <button class="version-btn" onclick="showVersion(4)">Version 4</button>
            <button class="version-btn" onclick="showVersion(5)">Version 5</button>
            <button class="version-btn" onclick="showVersion(6)">Version 6</button>
            <button class="version-btn" onclick="showVersion(7)">Version 7</button>
            <button class="version-btn" onclick="showVersion(8)">Version 8</button>
        </div>

        <div id="version-content">
            <!-- Content will be dynamically loaded here -->
        </div>
    </div>

    <script>
        const versions = {
            1: {
                uuid: "6ba7b810-9dad-11d1-80b4-00c04fd430c8",
                parts: ["6ba7b810", "9dad", "11d1", "80b4", "00c04fd430c8"],
                labels: ["Time (Low)", "Time (Mid)", "Ver 1 + Time", "Clock + Var", "MAC Address"],
                descriptions: ["Low part of timestamp", "Middle part of timestamp", "Version (1) + clock sequence", "Clock sequence + node ID", "MAC Address (computer ID)"],
                colors: ["#e53e3e", "#dd6b20", "#38a169", "#3182ce", "#805ad5"],
                title: "Version 1: The Time Traveler (1990s)",
                description: "Version 1 UUIDs are like a diary entry that tells you exactly when it was written and which computer wrote it! They contain the exact time they were created and information about the computer that made them.",
                analogy: "Think of it like a timestamp sticker that also includes your computer's ID number - very detailed, but maybe shares too much information!",
                pros: [
                    "Contains real timestamp information",
                    "Naturally sorted by creation time",
                    "Can trace back to original computer"
                ],
                cons: [
                    "Reveals computer's MAC address (privacy concern)",
                    "Not great for database performance",
                    "Can be predictable"
                ]
            },
            3: {
                uuid: "6fa459ea-ee8a-3ca4-894e-db77e160355e",
                parts: ["6fa459ea", "ee8a", "3ca4", "894e", "db77e160355e"],
                labels: ["MD5 Hash", "MD5 Hash", "Ver 3 + Hash", "Var + Hash", "MD5 Hash"],
                descriptions: ["Hash of input name", "Hash of input name", "Version (3) + hash data", "Variant + hash data", "More hash data"],
                colors: ["#e53e3e", "#dd6b20", "#38a169", "#3182ce", "#805ad5"],
                title: "Version 3: The Name-Based Helper (2005)",
                description: "Version 3 UUIDs are like a magical recipe - if you give it the same ingredients (like 'my favorite dog'), it will always cook up the exact same UUID!",
                analogy: "It's like having a magic spell that always creates the same result when you say the same magic words. Perfect for consistency!",
                example: "Input: 'my favorite dog' → Always creates: 6fa459ea-ee8a-3ca4-894e-db77e160355e",
                pros: [
                    "Always creates the same UUID for the same input",
                    "Great for creating consistent identifiers",
                    "No random generation needed"
                ],
                cons: [
                    "Uses old MD5 security (not very strong anymore)",
                    "People can potentially guess inputs",
                    "Limited security for sensitive data"
                ]
            },
            4: {
                uuid: "550e8400-e29b-41d4-a716-446655440000",
                parts: ["550e8400", "e29b", "41d4", "a716", "446655440000"],
                labels: ["Random", "Random", "Ver 4 + Rand", "Var + Rand", "Random"],
                descriptions: ["Random bits", "Random bits", "Version (4) + random bits", "Variant + random bits", "Random bits"],
                colors: ["#e53e3e", "#dd6b20", "#38a169", "#3182ce", "#805ad5"],
                title: "Version 4: The Random Champion (2005)",
                description: "Version 4 UUIDs are completely random - like rolling magical dice with trillions of sides! Every single UUID is a complete surprise.",
                analogy: "It's like getting a completely random locker number at school - super secure because nobody can guess the next one, but not organized in any helpful way!",
                pros: [
                    "Completely unpredictable and secure",
                    "No information leakage",
                    "Simple to generate",
                    "Most widely supported"
                ],
                cons: [
                    "No natural ordering",
                    "Can hurt database performance",
                    "Completely random (no useful patterns)"
                ]
            },
            5: {
                uuid: "74738ff5-5367-5958-9aee-98fffdcd1876",
                parts: ["74738ff5", "5367", "5958", "9aee", "98fffdcd1876"],
                labels: ["SHA1 Hash", "SHA1 Hash", "Ver 5 + Hash", "Var + Hash", "SHA1 Hash"],
                descriptions: ["SHA-1 hash of input", "SHA-1 hash of input", "Version (5) + SHA-1 hash", "Variant + SHA-1 hash", "More SHA-1 hash"],
                colors: ["#e53e3e", "#dd6b20", "#38a169", "#3182ce", "#805ad5"],
                title: "Version 5: The Improved Name-Helper (2005)",
                description: "Version 5 is like Version 3's smarter older sibling! It does the same magical recipe trick but with much stronger security.",
                analogy: "Same magic spell concept as Version 3, but now the spell book has a much stronger lock on it!",
                example: "Input: 'my favorite dog' → Always creates: 74738ff5-5367-5958-9aee-98fffdcd1876",
                pros: [
                    "Always creates same UUID for same input",
                    "Better security than Version 3 (SHA-1)",
                    "Consistent and reproducible"
                ],
                cons: [
                    "SHA-1 is getting old too",
                    "Still not ideal for highly sensitive data",
                    "Can be predictable if input is guessed"
                ]
            },
            6: {
                uuid: "1ec9414c-232a-6b00-b3c8-9e6bdeced846",
                parts: ["1ec9414c", "232a", "6b00", "b3c8", "9e6bdeced846"],
                labels: ["Time (High)", "Time (Mid)", "Ver 6 + Time", "Var + Clock", "Clock + Node"],
                descriptions: ["Time high (most significant)", "Time middle", "Version (6) + time high", "Variant + clock sequence", "Clock sequence + node"],
                colors: ["#e53e3e", "#dd6b20", "#38a169", "#3182ce", "#805ad5"],
                title: "Version 6: The Organizer (2024)",
                description: "Version 6 took all the good parts of Version 1 but reorganized them like cleaning up a messy room! Now the timestamp comes first, making everything easier to sort.",
                analogy: "Like taking a diary with random page numbers and renumbering all the pages in chronological order - much easier to find things!",
                pros: [
                    "Time-ordered like Version 1",
                    "Better database performance than V1",
                    "Maintains timestamp benefits",
                    "Improved organization"
                ],
                cons: [
                    "Still relatively new",
                    "More complex than random UUIDs",
                    "May reveal timing information"
                ]
            },
            7: {
                uuid: "017f22e2-79b0-7cc3-98c4-dc0c0c07398f",
                parts: ["017f22e2", "79b0", "7cc3", "98c4", "dc0c0c07398f"],
                labels: ["Timestamp", "Timestamp", "Ver 7 + Rand", "Var + Rand", "Random (74 bits)"],
                descriptions: ["Unix timestamp (milliseconds)", "Unix timestamp (milliseconds)", "Version (7) + random data", "Variant + random data", "Random data (74 bits!)"],
                colors: ["#e53e3e", "#dd6b20", "#38a169", "#3182ce", "#805ad5"],
                title: "Version 7: The Superstar (2024) ⭐",
                description: "Version 7 is like the superhero of UUIDs! It combines the best parts of all previous versions - it has timestamps for organization AND random data for security.",
                analogy: "It's like having a perfectly organized library where new books automatically go in chronological order, but each book also has a unique secret code!",
                timeline: [
                    "10:00:00 → 017f22e2-79b0-7cc3-98c4-dc0c0c07398f",
                    "10:00:01 → 017f22e2-79b4-7891-a2b5-123456789abc",
                    "10:00:02 → 017f22e2-79b8-7def-b6c7-987654321def"
                ],
                pros: [
                    "Perfect time ordering",
                    "50% faster database performance",
                    "74 bits of random data (super secure)",
                    "Works until year 10,895!",
                    "Best of all worlds"
                ],
                cons: [
                    "Very new (not all systems support it yet)",
                    "Slightly more complex to generate",
                    "Reveals creation time"
                ]
            },
            8: {
                uuid: "320c3d4d-cc00-875b-8ec9-32d5f69181c0",
                parts: ["320c3d4d", "cc00", "875b", "8ec9", "32d5f69181c0"],
                labels: ["Custom Data", "Custom Data", "Ver 8 + Custom", "Var + Custom", "Custom Data"],
                descriptions: ["Custom application data", "Custom application data", "Version (8) + custom data", "Variant + custom data", "Custom application data"],
                colors: ["#e53e3e", "#dd6b20", "#38a169", "#3182ce", "#805ad5"],
                title: "Version 8: The Customizable One (2024)",
                description: "Version 8 is like having a build-your-own ID card kit! Programmers can put whatever special information they need right into the UUID.",
                analogy: "It's like having a magic ID card where you can choose what information goes on it - player level, server number, game type, whatever you need!",
                examples: [
                    "Gaming: Player ID + Server ID + Match ID",
                    "IoT: Device Type + Location + Sensor Reading", 
                    "Medical: Hospital ID + Patient Type + Equipment ID"
                ],
                pros: [
                    "Completely customizable",
                    "Can embed application-specific data",
                    "Very flexible for special needs",
                    "Efficient for specific use cases"
                ],
                cons: [
                    "Requires careful design",
                    "Can be complex to implement",
                    "May not be interoperable",
                    "Needs documentation"
                ]
            }
        };

        function createDiagram(version) {
            // Clear any existing diagram
            d3.select("#uuid-diagram").remove();

            // Create SVG container
            const containerWidth = 800;
            const containerHeight = 300;
            const margin = { top: 20, right: 40, bottom: 100, left: 40 };
            const width = containerWidth - margin.left - margin.right;
            const height = containerHeight - margin.top - margin.bottom;

            const svg = d3.select("#diagram-container")
                .append("svg")
                .attr("id", "uuid-diagram")
                .attr("width", containerWidth)
                .attr("height", containerHeight)
                .attr("viewBox", `0 0 ${containerWidth} ${containerHeight}`)
                .style("max-width", "100%")
                .style("height", "auto");

            const g = svg.append("g")
                .attr("transform", `translate(${margin.left},${margin.top})`);

            // Define arrowhead marker
            svg.append("defs").append("marker")
                .attr("id", "arrowhead")
                .attr("viewBox", "0 0 10 10")
                .attr("refX", 9)
                .attr("refY", 3)
                .attr("markerWidth", 6)
                .attr("markerHeight", 6)
                .attr("orient", "auto")
                .append("path")
                .attr("d", "M 0 0 L 10 3 L 0 6 Z")
                .attr("class", "arrow");

            // Calculate segment positions
            const segmentWidths = [80, 50, 50, 50, 120];
            const segmentSpacing = 8;
            const totalWidth = segmentWidths.reduce((a, b) => a + b, 0) + (segmentWidths.length - 1) * segmentSpacing;
            const startX = (width - totalWidth) / 2;

            let currentX = startX;
            const segmentY = 40;
            const segmentHeight = 30;

            // Draw UUID segments
            version.parts.forEach((part, i) => {
                const segmentWidth = segmentWidths[i];
                
                // Draw segment rectangle
                g.append("rect")
                    .attr("class", "uuid-segment")
                    .attr("x", currentX)
                    .attr("y", segmentY)
                    .attr("width", segmentWidth)
                    .attr("height", segmentHeight)
                    .attr("fill", version.colors[i])
                    .attr("rx", 4)
                    .attr("ry", 4);

                // Add segment text
                g.append("text")
                    .attr("x", currentX + segmentWidth / 2)
                    .attr("y", segmentY + segmentHeight / 2)
                    .attr("text-anchor", "middle")
                    .attr("dominant-baseline", "middle")
                    .attr("fill", "white")
                    .attr("font-family", "Monaco, monospace")
                    .attr("font-size", "12px")
                    .attr("font-weight", "bold")
                    .text(part);

                // Calculate description positions to avoid overlap
                const descriptionPositions = [
                    { x: currentX + segmentWidth / 2, y: 180, textAnchor: "start" },
                    { x: currentX + segmentWidth / 2, y: 200, textAnchor: "start" },
                    { x: currentX + segmentWidth / 2, y: 220, textAnchor: "middle" },
                    { x: currentX + segmentWidth / 2, y: 240, textAnchor: "end" },
                    { x: currentX + segmentWidth / 2, y: 260, textAnchor: "end" }
                ];

                const descPos = descriptionPositions[i];

                // Draw connection line
                const lineStartX = currentX + segmentWidth / 2;
                const lineStartY = segmentY + segmentHeight;
                const lineEndX = descPos.x;
                const lineEndY = descPos.y - 15;

                g.append("path")
                    .attr("class", "connection-line")
                    .attr("d", `M ${lineStartX} ${lineStartY} L ${lineStartX} ${lineStartY + 20} L ${lineEndX} ${lineEndY}`)
                    .attr("marker-end", "url(#arrowhead)");

                // Add description text with better positioning
                g.append("text")
                    .attr("class", "description-text")
                    .attr("x", descPos.x)
                    .attr("y", descPos.y)
                    .attr("text-anchor", descPos.textAnchor)
                    .text(version.descriptions[i]);

                currentX += segmentWidth + segmentSpacing;
            });
        }

        function showVersion(versionNum) {
            // Update active button
            document.querySelectorAll('.version-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.version-btn').forEach(btn => {
                if (btn.textContent.includes(versionNum.toString())) {
                    btn.classList.add('active');
                }
            });

            const version = versions[versionNum];
            const content = document.getElementById('version-content');

            let html = `
                <div class="uuid-display">
                    <h2 style="text-align: center; color: #2d3748; margin-bottom: 20px;">${version.title}</h2>
                    
                    <div class="uuid-container">
                        <div class="diagram-container">
                            <div class="uuid-main">Example UUID v${versionNum}: ${version.uuid}</div>
                            <div id="diagram-container"></div>
                            
                            ${version.example ? `<div class="info-box"><strong>🎯 Magic Example:</strong> ${version.example}</div>` : ''}
                        </div>
                        
                        <div class="breakdown-table">
                            <div class="table-header">
                                <div class="table-cell cell1">Part 1</div>
                                <div class="table-cell cell2">Part 2</div>
                                <div class="table-cell cell3">Part 3</div>
                                <div class="table-cell cell4">Part 4</div>
                                <div class="table-cell cell5">Part 5</div>
                            </div>
                            <div class="table-row">
                                <div class="table-cell cell1">${version.labels[0]}</div>
                                <div class="table-cell cell2">${version.labels[1]}</div>
                                <div class="table-cell cell3">${version.labels[2]}</div>
                                <div class="table-cell cell4">${version.labels[3]}</div>
                                <div class="table-cell cell5">${version.labels[4]}</div>
                            </div>
                            <div class="table-row">
                                <div class="table-cell cell1">${version.parts[0]}</div>
                                <div class="table-cell cell2">${version.parts[1]}</div>
                                <div class="table-cell cell3">${version.parts[2]}</div>
                                <div class="table-cell cell4">${version.parts[3]}</div>
                                <div class="table-cell cell5">${version.parts[4]}</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="description">
                        <h3>What makes it special?</h3>
                        <p><strong>${version.description}</strong></p>
                        <p><em>${version.analogy}</em></p>
                    </div>

                    ${version.timeline ? `
                        <div class="timeline">
                            <h4>🕐 Time Ordering Magic (Version 7):</h4>
                            ${version.timeline.map(item => `<div class="timeline-item">${item}</div>`).join('')}
                            <p><strong>Notice:</strong> The timestamp part increases with time, making natural sorting possible!</p>
                        </div>
                    ` : ''}

                    ${version.examples ? `
                        <div class="timeline">
                            <h4>🎮 Cool Custom Uses (Version 8):</h4>
                            ${version.examples.map(example => `<div class="timeline-item">${example}</div>`).join('')}
                        </div>
                    ` : ''}
                    
                    <div class="pros-cons">
                        <div class="pros">
                            <h4>👍 Super Powers (Pros)</h4>
                            <ul>
                                ${version.pros.map(pro => `<li>${pro}</li>`).join('')}
                            </ul>
                        </div>
                        <div class="cons">
                            <h4>🤔 Challenges (Cons)</h4>
                            <ul>
                                ${version.cons.map(con => `<li>${con}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                </div>
            `;

            content.innerHTML = html;
            
            // Create the D3.js diagram after the HTML is rendered
            setTimeout(() => createDiagram(version), 50);
        }

        // Show Version 1 by default
        showVersion(1);
    </script>
</body>
</html>